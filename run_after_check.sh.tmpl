#! /usr/bin/env bash
# chezmoi apply „ÅåÂÆå‰∫Ü„Åó„Åü„ÇâÂÆüË°å„Åï„Çå„Çã
echo "run_after_6_check.sh.tmpl"
echo "--------------------------------"
echo "Chezmoi apply completed!!"
echo "USER: $(whoami)"
echo "SHELL: ${SHELL}"
echo "PATH ..."
echo "${PATH}" | tr ':' '\n'
echo "--------------------------------"
echo "File check start!!"
echo "pwd: $(pwd)"
tree
echo "--------------------------------"
echo "${HOME}"
ls -la "${HOME}"
echo "--------------------------------"
echo "${HOME}/data"
ls -la "${HOME}/data"
echo "--------------------------------"
echo "${HOME}/.config"
ls -la "${HOME}/.config"
echo "--------------------------------"
echo "${HOME}/.ssh"
ls -la "${HOME}/.ssh"
echo "--------------------------------"
echo "${HOME}/.local/bin"
ls -la "${HOME}/.local/bin"
echo "--------------------------------"
echo "${HOME}/.local/share"
ls -la "${HOME}/.local/share"
echo "--------------------------------"
{{ if eq .chezmoi.os "linux" }}
    echo "${HOME}/.local/share/themes"
    ls -la "${HOME}/.local/share/themes"
    echo "--------------------------------"
    echo "${HOME}/.local/share/icons"
    ls -la "${HOME}/.local/share/icons"
    echo "--------------------------------"
    echo "${HOME}/.local/share/fonts"
    ls -la "${HOME}/.local/share/fonts"
    echo "--------------------------------"
{{ end }}

# sourceDir Á¢∫Ë™ç
echo {{.dotfilesDir | quote }}
ls -la {{ .dotfilesDir }}
echo "--------------------------------"


# ~/dotfiles „Å´„Ç∑„É≥„Éú„É™„ÉÉ„ÇØ„É™„É≥„ÇØ
{{- if ne .name "dev" }}
    echo 'Dotfiles symlink ...'
    if [ -d "${HOME}/dotfiles" ]; then
        echo "Dotfiles already exists."
    else
        echo "Create symlink..."
        ln -sf "{{ .dotfilesDir }}" "${HOME}/dotfiles"
    fi
    ls -la "${HOME}/dotfiles"
    echo "--------------------------------"
{{- end }}

echo 'Your config git user is ...'
git config --list
echo "--------------------------------"
# ÂØæË©±Âûã„Å´„Åô„ÇãÔºü
{{/*

{{ if eq .chezmoi.hostname "101" -}}
    echo 'userconf update ? (y/n)'
    read ans
    if [ "$ans" = "y" ]; then
        cat "${HOME}/.config/git/config"
    fi
    echo "--------------------------------"
{{ end -}}

*/}}

chezmoi data
echo "--------------------------------"
chezmoi doctor
echo "--------------------------------"
echo "SourceDir: {{ .chezmoi.sourceDir }}"
date
echo 'Chezmoi Apply done!!'
echo "--------------------------------"
echo "üò∫‚ô®ü•¶üåàüö≤"
