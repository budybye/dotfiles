# よく使うコマンド
alias q="exit"
alias c="clear"
alias hg="history | grep"
alias hh="cd ~"
alias ds='echo $PATH && echo $SHELL'
alias vv="env | grep"
alias www="ps aux"
alias opi="for i in {1..3}; do time ${SHELL} -ic exit;done"
alias note="${EDITOR:-vim} ${HOME}/note.md"  # ノートを開く
alias docs="cd ${HOME}/Documents"  # ドキュメントフォルダに移動

# ファイル操作のエイリアス
alias mv="mv -i"   # 上書き確認を有効にする
alias cp="cp -i"   # 上書き確認を有効にする
alias rm="rm -i"   # 削除確認を有効にする
alias mkdir="mkdir -p"  # 親ディレクトリも作成

if [ -f "${HOME}/.config/neofetch/image.txt" ]; then
    alias x="cat ${HOME}/.config/neofetch/image.txt"
fi

if command -v git >/dev/null 2>&1; then
    alias g="git"
    alias bit='g add -A && g commit --allow-empty-message -m "♨️" && g push origin $(g branch | sed -n -e "s/^\* \(.*\)/\1/p")'
fi

if command -v curl >/dev/null 2>&1; then
    alias curl="curl -s"
    alias wt="curl wttr.in"  # 天気予報を表示
    alias ppp="curl -s https://ip.3322.net"  # パブリックIPアドレスを表示
    alias xrp="curl -s https://xrp.gl/api/get?name=bob"
fi

if command -v ping >/dev/null 2>&1; then
    alias pi="ping -c 5 1.1.1.1"
    alias ping="ping -c 5"  # 5回だけpingを送信
fi

if command -v netstat >/dev/null 2>&1; then
    alias ports="netstat -tuln"  # 開いているポートを表示
fi

if command -v python3 >/dev/null 2>&1; then
    alias python="python3"
    alias pip="pip3"
fi

if command -v bun >/dev/null 2>&1; then
    alias npm="bun"
    alias npx="bunx"
    alias yarn="bun"
    alias yarnx="bunx"
fi

if command -v date >/dev/null 2>&1; then
    alias now="date +%Y%m%d%H%M%S"
    alias bk="cp -t $HOME/data/$(now).bk"
fi

if command -v tree >/dev/null 2>&1; then
    alias tree="tree -NC"   # N: 文字化け対策 C: 色を付ける
fi

if command -v xsel >/dev/null 2>&1; then
    alias cx="xsel -b -i"  # クリップボードにコピー
    alias cv="xsel -b -o"  # クリップボードの内容をコマンドに渡す
    alias cb="xsel -b"
fi

# http://localhost:3000 をブラウザで開く
if command -v xdg-open >/dev/null 2>&1; then
    alias lh="xdg-open http://localhost:3000"
    alias ggg="xdg-open https://youtube.com"
elif command -v open >/dev/null 2>&1; then
    alias lh="open -na 'Brave Browser' --args --new-window http://localhost:3000"
    alias ggg="open -na 'Brave Browser' --args --new-window https://youtube.com"
fi

# rosetta2のエイリアス
if command -v arch >/dev/null 2>&1; then
    alias amd="arch -x86_64 ${SHELL}"
    alias arm="arch -arm64 ${SHELL}"
fi

# ls lsd
if command -v lsd >/dev/null 2>&1; then
    alias ls='lsd --group-directories-first'
    alias l='ls -la'
    alias ll='ls -l'
    alias la='ls -a'
    alias lls='ls -la'
    alias lt='ls --tree'
fi

# bat
if command -v bat >/dev/null 2>&1; then
    alias cat="bat"
fi

# rg
if command -v rg >/dev/null 2>&1; then
    alias grep="rg"
fi

# fd
if command -v fd >/dev/null 2>&1; then
    alias find="fd"
fi

# zoxide
if command -v zoxide >/dev/null 2>&1; then
    alias cd="z"
fi

# tldr
if command -v tldr >/dev/null 2>&1; then
    alias h="tldr"
fi

# chezmoi
if command -v chezmoi >/dev/null 2>&1; then
    alias che="chezmoi"
    alias ca="chezmoi apply"
    alias cai="chezmoi init --apply https://github.com/budybye/dotfiles.git"
fi

# bitwarden
if command -v bw >/dev/null 2>&1; then
    alias bwbw="export BW_SESSION=$(bw unlock --raw)"
fi

# vscode vscodium cursor mac ubuntu arm64
if command -v cursor >/dev/null 2>&1; then
    alias co="cursor"
elif [ -f "${HOME}/Applications/cursor" ]; then
    alias co="${HOME}/Applications/cursor --no-sandbox"
elif command -v codium >/dev/null 2>&1; then
    alias co="codium"
elif command -v code >/dev/null 2>&1; then
    alias co="code"
fi

# docker
if command -v docker >/dev/null 2>&1; then
    alias d="docker"
    alias di="docker image"
    alias dr="docker run --rm"
    alias ds="docker stop $(docker ps -q)"
    alias dps="docker ps --format 'table {{.Names}}\t{{.Image}}\t{{.Ports}}\t{{.Status}}'"
    # イメージ名を引数にビルドし、プッシュする関数のエイリアス
    alias ddd='function _ddd() { IMAGE_NAME="$1"; docker build -t "$IMAGE_NAME" . && docker push "$IMAGE_NAME"; }; _ddd'

    alias dc="docker compose"
    alias dcb="docker compose build"
    alias dcu="docker compose up"
    alias dcd="docker compose down"
    ## 停止コンテナ、タグ無しイメージ、未使用ボリューム、未使用ネットワーク一括削除
    alias drm="docker system prune -af --volumes"

    alias dev="docker run --rm -it -name ubuntu-dev -hostname docker -v $(pwd):/home/app -p 8080:8080 -p 33389:3389 -p 2222:22 ghcr.io/budybye/ubuntu-dev:dev /bin/bash"
fi

# brew
if command -v brew >/dev/null 2>&1; then
    alias bs="brew -S"
    alias bb="brew bundle --file ${HOME}/.config/Brewfile && brew bundle cleanup --force --file ${HOME}/.config/Brewfile && brew update && brew upgrade && brew autoremove && brew doctor"
fi

# multipass
if command -v multipass >/dev/null 2>&1; then
    alias mu="multipass"
    alias md="mu launch docker -c 4 -m 8G -d 40G  --timeout 3600 --mount ${HOME}/apps:/home/ubuntu/apps && mu info docker"

    alias ml="mu launch -n ubuntu 24.04 -c 4 -m 8G -d 44G --timeout 7200 --cloud-init ${HOME}/dotfiles/cloud-init/multipass.yaml && mu exec ubuntu -- tail -7 /var/log/cloud-init.log"

    alias ms="mu stop ubuntu && mu delete -p ubuntu"
    # alias sm="ssh ubuntu@vm.local -i ~/.ssh/id_ed25519"
    alias sm="ssh ubuntu"
fi

# kube
if command -v kubectl >/dev/null 2>&1; then
    alias k="kubectl"
    # alias kx="kubectx"
    # alias kn="kubens"
fi

# apt
if command -v apt >/dev/null 2>&1; then
    alias agi="sudo apt install -y"
    alias agu="sudo apt update -y && sudo apt upgrade -y"
    alias aq="apt search"
fi

# speedtest
if command -v speedtest >/dev/null 2>&1; then
    alias st="speedtest"
fi

if command -v mise >/dev/null 2>&1; then
    alias mi="mise"
fi

if command -v sheldon >/dev/null 2>&1; then
    alias sl="sheldon lock --update"
fi

if command -v starship >/dev/null 2>&1; then
    alias sex="starship explain"
fi

if command -v age >/dev/null 2>&1; then
    if [ -d "${HOME}/.secrets" ]; then
        alias shhh="age-keygen | age --armor --passphrase > ${HOME}/.secrets/shhh.txt"
    fi
fi
